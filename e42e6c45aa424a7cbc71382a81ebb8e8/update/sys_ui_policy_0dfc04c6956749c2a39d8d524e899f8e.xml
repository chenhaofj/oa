<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<record_update table="sys_ui_policy">
  <sys_ui_policy action="INSERT_OR_UPDATE">
    <active>true</active>
    <conditions>nameISNOTEMPTY^EQ</conditions>
    <description/>
    <global>true</global>
    <inherit>false</inherit>
    <isolate_script>false</isolate_script>
    <model_id/>
    <model_table/>
    <on_load>true</on_load>
    <order>100</order>
    <reverse_if_false>true</reverse_if_false>
    <run_scripts>true</run_scripts>
    <script_false>function onCondition() {}</script_false>
    <script_true>function onCondition() {
  
	var userId = g_form.getValue('name');

   var csu = new GlideAjax("UserUtils"); //构造器参数为脚本库名称
    csu.addParam("sysparm_name", "getUserInfo"); //调用的方法
    csu.addParam("userId", userId);//其他参数
    var done = function(res) {
    	g_form.setValue('tripPlanName',res.data.username+'-的差旅申请单');
			g_form.setValue('company',res.data.company);
      g_form.setValue('department',res.data.department);
      g_form.setValue('phone',res.data.phone);
    }
    csu.getJson(done.bind(this));
}</script_true>
    <set_values/>
    <short_description>差旅计划申请按照用户填充部门公司信息</short_description>
    <sys_class_name>sys_ui_policy</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2022-05-31 15:43:55</sys_created_on>
    <sys_domain>global</sys_domain>
    <sys_domain_path>/</sys_domain_path>
    <sys_effective>true</sys_effective>
    <sys_id>0dfc04c6956749c2a39d8d524e899f8e</sys_id>
    <sys_mod_count>1</sys_mod_count>
    <sys_name/>
    <sys_overrides/>
    <sys_package/>
    <sys_policy/>
    <sys_scope>e42e6c45aa424a7cbc71382a81ebb8e8</sys_scope>
    <sys_update_name/>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2022-05-31 15:43:55</sys_updated_on>
    <table>x_yunji_oa_t_trip_plan</table>
    <ui_type>0</ui_type>
    <view/>
  </sys_ui_policy>
</record_update>
